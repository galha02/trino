#!/usr/bin/env bash

target="${BASH_SOURCE%/*/*}/target"

trino_version=$(./mvnw -B help:evaluate -Dexpression=pom.version -q -DforceStdout)
launcher_jar="${target}/trino-product-tests-launcher-${trino_version}-executable.jar"

if ! test -x "${launcher_jar}"; then
    echo "Could not find launcher jar ${launcher_jar}." >&2
    echo "Run \`./mvnw clean install -pl :trino-product-tests-launcher\`" >&2
    exit 3
fi

# Run the executable directly to pick memory settings defined in it. Invoking as `java -jar ...` would ignore them.
exec "${launcher_jar[0]}" "$@"
